<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Place an Order</title>
	<link rel="stylesheet" type="text/css" href="../css/home.css">
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBI_dSpZdUtWk8a9FzR3fNnwnO-4aYZctg&callback=initMap&libraries=places"
    async defer></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script src="../js/js-cookie-master/src/js.cookie.js"></script>
	
	<style>
		#map {
			height: 500px;
			width: 500px;
			float: right;
		}
	</style>
</head>
<body id="placeOrder" >
	<a class="options" href="../home.php">return home</a>
	<h1 id="greentitle"> Order </h1>
	<fieldset class="fieldset">
	<form action="../include/dboperationOrder.php" method="POST">
			<input type="hidden" name="firstName" id="firstName">
			<input type="hidden" name="lastName" id="lastName">
			<input type="hidden" name="ID" id="ID">

			<p  id="green" >Box Type: </p>
			<select id="box" name="box"></select>
			<br>

			<p id="green">Delivery :</p><select id="scheduleDrop" name="schedule">
			</select><br>
			<script>
			$(document).ready(function(){

			$.getJSON( "../include/queryDeliveries.php" , function(data) {

							map = new google.maps.Map(document.getElementById('map'), {
          							center: {lat: 42.3467, lng: -71.0972},
         					 		zoom: 12 });
							var geocoder = new google.maps.Geocoder();
							$.each(data, function(i, delivery){
								$("#scheduleDrop").append("<option value ="+delivery.LocationName+"@"+delivery.DateT+">"+delivery.LocationName+" "+delivery.DateT+" "+delivery.TimeT+" "+delivery.LocationAddress+"</option>");
								var address = delivery.LocationAddress;
								var title = delivery.LocationName;
								geocoder.geocode({'address': address}, function(results, status) {
							          if (status === google.maps.GeocoderStatus.OK) {
							            map.setCenter(results[0].geometry.location);
							            var marker = new google.maps.Marker({
							              map: map,
							              position: results[0].geometry.location,
							              title: title							            });
							          } else {
							            alert('Geocode was not successful for the following reason: ' + status);
							          }
							        });
								

							});
						
						})
						.fail(function() {
								console.log( "getJSON error - delivery Schedule" );
						});
			
					});
			</script>
			<script>
			$(document).ready(function(){
				$("#firstName").val(Cookies.get("firstName"));
				$("#lastName").val(Cookies.get("lastName"));
				$("#ID").val(Cookies.get("ID"));
			});
			</script>
			<script>
			$(document).ready(function(){

			$.getJSON( "../include/queryBoxes.php" , function(data) {

				
							$.each(data, function(i, box){
								$("#box").append("<option value ="+box.BoxName+">"+box.BoxName+"</option>");
								

							});
							})
						.fail(function() {
								console.log( "getJSON error - boxes" );
						});
			
					});
			</script>
			<input class="button" type="submit" value="submit order">
			
	</fieldset>

	<div id="map"></div>

</body>
</html>

<!--Google Maps API key: AIzaSyBI_dSpZdUtWk8a9FzR3fNnwnO-4aYZctg-->