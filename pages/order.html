<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Place an Order</title>
	<link rel="stylesheet" type="text/css" href="../css/home.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<style>
		#map {
			height: 500px;
			width: 500px;
			float: right;
		}
	</style>
</head>
<body id="placeOrder" >
	<a id="link1" class="options" href="../home.php">return home</a>
	<h1 id="greentitle"> Order </h1>
	<fieldset class="fieldset">
	<form action="../include/dboperationOrder.php" method="POST">
			<p  id="green" >Box Type: </p><br>

			<p id="green">Delivery :</p><select id="scheduleDrop" name="schedule">
			</select><br>
			<script>
			$(document).ready(function(){

			$.getJSON( "../include/queryDeliveries.php" , function(data) {

							map = new google.maps.Map(document.getElementById('map'), {
          							center: {lat: 42.3467, lng: -71.0972},
         					 		zoom: 12 });
							var geocoder = new google.maps.Geocoder();
							$.each(data, function(i, delivery){
								$("#scheduleDrop").append("<option value ="+delivery.LocationName+"@"+delivery.DateT+">"+delivery.LocationName+" "+delivery.DateT+" "+delivery.TimeT+" "+delivery.LocationAddress+"</option>");
								var address = delivery.LocationAddress;
								geocoder.geocode({'address': address}, function(results, status) {
							          if (status === google.maps.GeocoderStatus.OK) {
							            map.setCenter(results[0].geometry.location);
							            var marker = new google.maps.Marker({
							              map: map,
							              position: results[0].geometry.location,
							              title: "\""+delivery.LocationName+"\""
							            });
							          } else {
							            alert('Geocode was not successful for the following reason: ' + status);
							          }
							        });
								

							});
						
						})
						.fail(function() {
								console.log( "getJSON error - delivery Schedule" );
						});
					});
			</script>
			<input class="button" type="submit" value="submit order">
			
	</fieldset>

	<div id="map"></div>

<!--     <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 42.3467, lng: -71.0972},
          zoom: 12
        });
        var marker1 = new google.maps.Marker({
    		position: {lat: 42.365608, lng: -71.111261},
    		map: map,
    		title: "Cambridge Community Center"
  		});
  		var marker2 = new google.maps.Marker({
    		position: {lat: 42.338382, lng: -71.074887},
    		map: map,
    		title: "South End Community Health Center"
  		});
  		var marker3 = new google.maps.Marker({
    		position: {lat: 42.340350, lng: -71.073104},
    		map: map,
    		title: "Blackstone Community Center"
  		});
      }
    </script> -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBI_dSpZdUtWk8a9FzR3fNnwnO-4aYZctg&callback=initMap&libraries=places"
    async defer></script>
</body>
</html>

<!--Google Maps API key: AIzaSyBI_dSpZdUtWk8a9FzR3fNnwnO-4aYZctg-->