<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Delivery Schedule</title>
	<link rel="stylesheet" type="text/css" href="../css/home.css">
</head>
<body class="admin">
	<h3><a href="../home.php">return home</a></h3>
	<fieldset>
	<legend>Current Orders</legend>
	<table id="ordersTable">
		<tr><th>Name</th><th>Box Type</th><th>Quantity</th><th>Price</th><th>Pick Up Date</th><th>Delivery Location</th></tr>
	</table>
	</fieldset>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript">
		$(document).ready(function buildTable(){

			$.getJSON( "../include/queryOrders.php" , function(data) {
					
							$.each(data, function(i, order){
								$("#ordersTable").append("<tr><<td>" + order.FirstName + order.LastName + "</td><td>" + order.BoxType + "</td><td>" + order.Quantity + "</td><td>" + order.Price + "</td><td>" + order.PickupDate + "</td><td>" + order.DeliveryLocation + "</td></tr>");
							});
						
						})
						.fail(function() {
								console.log( "getJSON error" );
						});
					});
	</script>
	<br><br>
	<form action="../include/insertDelivery.php" method="POST">
	<fieldset>
	<legend>Add Delivery</legend>
		Location: 
		<select id="locations" name="name">
			
		</select><br>
		Date of Delivery: 
		<input type="date" name="date"><br>
		Time of Delivery: 
		<input type="time" name="time"><br>
		<input type="submit" name="addDelivery" value="Add Delivery to Schedule">
	</fieldset>
	</form>

    <script type="text/javascript">
		$(document).ready(function(){

			$.getJSON( "../include/queryLocations.php" , function(data) {
					
							$.each(data, function(i, location){
								$("#locations").append("<option value=\""+ location.Location_Name + "\">" + location.Location_Name + "</option>");
							});
						
						})
						.fail(function() {
								console.log( "getJSON error" );
						});
					});
	</script>

	<br><br>
	<fieldset>
	<legend>Deliveries</legend>
	<table id="deliveries">
		<tr class=""><th>Click to Delete</th><th>Date</th><th>Time</th><th>Location Name</th><th>Location Address</th></tr>
	</table>
	</fieldset>

	<script type="text/javascript">
		$(document).ready(function(){

			$.getJSON( "../include/queryDeliveries.php" , function(data) {
					
							$.each(data, function(i, delivery){

								$("#deliveries").append("<tr><td><input type=\"button\" name=\"delete\" value=\"Delete\" onclick=\"toDelete(" + delivery.LocationName + ", " + delivery.DateT + ", " + delivery.TimeT + ")\"></td><td>" + delivery.DateT + "</td><td>" + delivery.TimeT + "</td><td>" + delivery.LocationName + "</td><td>" + delivery.LocationAddress + "</td></tr>");

							});
						
						})
						.fail(function() {
								console.log( "getJSON error" );
						});
					});
		function toDelete(name, date, time) {
			window.location.href = "../include/deleteDelivery.php?name="+name+"&date="+date+"&time="+time;
		}
	</script>

</body>
</html>
























